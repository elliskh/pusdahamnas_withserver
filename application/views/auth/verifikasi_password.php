<!DOCTYPE html>
<html lang="zxx">

<head>
	<!--====== Required meta tags ======-->
	<meta charset="utf-8" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<!--====== Title ======-->
	<title>Verifikasi Password Baru | Pusdahamnas Komnasham Republik Indonesia</title>
	<!--====== Favicon Icon ======-->
	<link rel="shortcut icon" href="<?= base_url() ?>assets_front/images/img-komnasham-favicon.png" type="image/x-icon">
	<!--====== Google Fonts ======-->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
	<!--====== Font Awesome ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/fontawesome.5.9.0.min.css">
	<!--====== Flaticon CSS ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/flaticon.css">
	<!--====== Bootstrap css ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/bootstrap.4.5.3.min.css">
	<!--====== Magnific Popup ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/magnific-popup.css">
	<!--====== Slick Slider ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/slick.css">
	<!--====== Animate CSS ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/animate.min.css">
	<!--====== Nice Select ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/nice-select.css">
	<!--====== Padding Margin ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/spacing.min.css">
	<!--====== Menu css ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/menu.css">
	<!--====== Main css ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/style.css">
	<!--====== Responsive css ======-->
	<link rel="stylesheet" href="<?= base_url() ?>assets_landing/css/responsive.css">

	<style>
		@media only screen and (min-width: 1283px) {
			.logo {
				width: 240px;
			}
		}

		@media only screen and (max-width: 1282px) {
			.logo {
				width: 200px;
			}
		}

		@media only screen and (max-width: 1269px) {
			.logo {
				width: 180px;
			}
		}

		@media only screen and (max-width: 1223px) {
			.logo {
				width: 140px;
			}
		}

		.logo-mobile {
			width: 70%;
			height: 100%;
		}
	</style>

	<script>
		(function (d) {
			var s = d.createElement("script");
			s.setAttribute("data-account", "gYvhBDoJQM");
			s.setAttribute("src", "https://accessibilityserver.org/widget.js");
			(d.body || d.head).appendChild(s);
		})(document)
	</script>
	<noscript>Please ensure Javascript is enabled for purposes of <a href="https://accessibilityserver.org">website accessibility</a></noscript>

</head>
<style>
	.img-logo {
		width: 100%;
		max-width: 820px;
	}

	.box-icon {
		font-size: 20px !important;
	}

	.breadcrumb {
		background-color: transparent !important;
	}

	#title_isu {
		font-size: 20px;
		text-transform: capitalize;
		font-weight: bold;
	}
</style>

<body data-topbar="dark" data-layout="horizontal">
	<!--<div id="layout-wrapper" class="page-wrapper hero-section-three rel z-2 pt-105 rpt-150 pb-130 rpb-100">   
		<!--====== Header Part Start ======-->
	<!--<header class="main-header header-three">
			<!--Header-Upper-->
	<!--<div class="header-upper">
				<div class="container clearfix">
					<div class="header-inner py-20">
						<div class="logo-outer">
							<div class="logo"><a href="<?= base_url() ?>"><img src="<?= base_url() ?>assets_landing/images/logos/logo-pusdahamnas.png" class="logo" alt="Logo"></a></div>
						</div>

						<div class="nav-outer d-flex align-items-center clearfix mx-lg-auto">
							<nav class="main-menu navbar-expand-lg">
								<div class="navbar-header">
									<div class="logo-mobile"><a href="<?= base_url() ?>"><img src="<?= base_url() ?>assets_landing/images/logos/logo-pusdahamnas.png" alt="Logo" class="logo-mobile"></a></div>
									
									<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="main-menu">
										<span class="icon-bar"></span>
										<span class="icon-bar"></span>
										<span class="icon-bar"></span>
									</button>
								</div>

								<div class="navbar-collapse collapse clearfix" id="main-menu">
									<ul class="navigation clearfix">
										<li class="" style="font-size: small;"><a href="<?= base_url() ?>" style="color:var(base-color)">Beranda</a></li>
										<li class="dropdown"><a href="#" style="color:var(base-color)">Data HAM</a>
											<ul>
												<li><a href="<?= base_url('home/data') ?>" style="color:var(base-color)">Visualisasi Data</a></li>
												<li><a href="<?= base_url('home/media_analisis') ?>">Media Analisis</a></li>
											</ul>
										</li>
										<li class="dropdown" style="font-size: small;"  style="color:var(base-color)"><a onclick="location.href='<?= base_url('home/dokumen') ?>'" style="color:var(base-color)">Dokumen</a>
											<ul>
												<li><a href="<?= base_url('home/data_snp') ?>"  style="color:var(base-color)">Standar Norma & Peraturan</a></li>
												<li><a href="<?= base_url('home/glossary') ?>"  style="color:var(base-color)">Glosarium</a></li>
											</ul>
										</li>
										<li class="dropdown" style="font-size: small;"><a style="color:var(base-color)" onclick="location.href='<?= base_url('home/anggaranham_auditham') ?>'">Anggaran & Audit</a>
											<ul>
												<li><a href="<?= base_url('home/anggaran_ham') ?>" style="color:var(base-color)">Anggaran HAM</a></li>
												<li><a href="<?= base_url('home/audit_ham') ?>"style="color:var(base-color)">Audit HAM</a></li>
											</ul>
										</li>
										<li class="dropdown" style="font-size: small;"><a onclick="location.href='<?= base_url('home/pegiat_ham') ?>'" style="color:var(base-color)">Komunitas Pegiat HAM</a>
											<ul>
												<li><a href="<?= base_url('home/lembaga') ?>" style="color:var(base-color)">Lembaga HAM</a></li>
											</ul>
										</li>
									</ul>
								</div>

							</nav>-->

	<!-- Main Menu End-->

	<!--</div>-->

	<!--<div class="menu-right d-none d-lg-flex align-items-center">
							<a href="contact.html" class="login">Masuk <i class="fas fa-lock"></i></a> -->

	<!--<?php 
							if($this->session->tipe_daftar !=1 && $this->session->nama){?>
								<a href="<?=base_url('dashboard')?>"  class="btn btn-warning text-white">Dashboard</a>
							<?php    }else{
									//redirect(base_url());
								//echo '<a href="'. base_url('#') .'" class="theme-btn style-two"  style="font-size: small;width:18px;height:40px;">Daftar</a>&nbsp;';
								echo '<a href="'. base_url('home/login') .'" class="theme-btn style-two" style="font-size: small;width:85px;height:40px;">Masuk <i class="fas fa-arrow-right"></i></a>';
							} ?>
						</div>-->

	<!--</div>-->
	<!--</div>-->
	<!--</div>-->
	<!--End Header Upper-->

	<!--</header>-->
	<style type="text/css">
		.grad9isuH {
			background-image: linear-gradient(to bottom right, #e9e9ec, white);
		}

		form {
			padding: 2rem;
			border-radius: 4px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			max-width: 100%;
			background: #fff;
		}

		form .form-control {
			display: block;
			height: 50px;
			margin-right: 0.5rem;
			text-align: center;
			font-size: 1.25rem;
			min-width: 0;
		}

		form .form-control:last-child {
			margin-right: 0;
		}
	</style>
	<style type="text/css">
		.dropdown {
			color: var(--base-color);
		}

		.dropdown-menu li {
			position: relative;
		}

		.dropdown-menu .dropdown-submenu {
			display: none;
			position: absolute;
			left: 100%;
			top: -7px;
		}

		.dropdown-menu .dropdown-submenu-right {
			left: 100%;
			left: auto;
		}

		.dropdown-menu>li:hover>.dropdown-submenu {
			display: block;
		}

		.menu-toggle {
			color: white;
		}

		@media only screen and (max-width: 771px) {
			.sidebar {
				transform: translateY(0);
				transition: all .25s ease-in-out;
			}

			#ttg_kami {
				display: none;
			}
		}
	</style>

	<!-- start main content -->
	<div class="main-content">
		<div class="page-content">
			<div class="container-fluid">
				<?php
                   $url_get = (empty($_SERVER['HTTPS']) ? 'http' : 'https') . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";                   
                       if($url_get=='http://devpusdahamnas.komnasham.go.id/'){
                         echo "<marquee><span style='color: black;'>Ini adalah Website PUSDAHAMNAS yang sedang dalam Proses pengembangan. 
                               Sedangkan website PUSDAHAMNAS yang production tetap dapat di akses pada https://pusdahamnas.komnasham.go.id</span></marquee>";
                         
                       } 
                ?>

				<!-- Title Page Start -->
				<?php
header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Credentials: true ");
header("Access-Control-Allow-Methods: OPTIONS, GET, POST");
header("Access-Control-Allow-Headers: Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control");
?>
				<div class="container" style="margin-top: 8%;margin-bottom: 3%;">
					<div class="row">
						<center>
							<div class="col-md-6">
								<div class="card">
                                      <div class="card-header">
                                        <h3>Form Password Baru</h3>
                                      </div>
                                    <div class="card-body" style="margin-top: 8%;">
									<?php if ($this->session->flashdata('error_messages')) : ?>
										<div class="alert alert-danger alert-dismissible fade show" role="alert">
											<i class="mdi mdi-block-helper mr-2"></i>
											<?= $this->session->flashdata('error_messages') ?>
											<button type="button" class="close" data-dismiss="alert" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
									<?php endif ?>
										<form id="form-request-password" action="<?= site_url('auth/setnew_password') ?>" method="post" autocomplete="off">
										<input type="hidden" name="<?=$this->security->get_csrf_token_name();?>" value="<?=$this->security->get_csrf_hash();?>" style="display: none">
											<h4 class="text-center">Masukan Kode Verifikasi Password Baru</h4>
											<span class="text-center">Kami Telah mengirimkan email yang berisi kode verifikasi</span>
											<div class="d-flex mb-3">
												<input type="text" name="code_1" maxlength="1" pattern="[0-9]" class="form-control">
												<input type="text" name="code_2" maxlength="1" pattern="[0-9]" class="form-control">
												<input type="text" name="code_3" maxlength="1" pattern="[0-9]" class="form-control">
												<input type="text" name="code_4" maxlength="1" pattern="[0-9]" class="form-control">
												<input type="text" name="code_5" maxlength="1" pattern="[0-9]" class="form-control">
											</div>
                                            <div class="form-group input-group">
                                        	  <div class="input-group-prepend">
                                    		    <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                                    		  </div>
                									<input type="email" class="form-control" id="email" name="email" placeholder="Input Email" value="" required>
                							</div>
                                            <div class="form-group input-group">
                                        	  <div class="input-group-prepend">
                                    		    <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                                    		  </div>
                									<input type="password" class="form-control" id="password" name="password" placeholder="Input Sandi Baru" value="" required>
                							</div>
											<button form="form-request-password" type="submit" class="w-100 btn btn-primary">Proses</button>
										</form>
									</div>
								</div>
							</div>
						</center>
					</div>
				</div>
				<script type="text/javascript">
	$('#form-request-password-').on('submit', function (e) {
		e.preventDefault();

		let data = new FormData(this);
        //alert(CSRF.token_name + CSRF.hash);
		//data.append(CSRF.token_name, CSRF.hash);
        
		$.ajax({
  	        url: '<?= site_url('auth/setnew_password') ?>',//$(this).prop('action'),
	 		type: "POST",
			data: data, 
			dataType: 'json',
			processData: false,
			contentType: false,
            //async:false,
            //crossDomain:false,
			success: (res) => {			
			///alert(JSON.stringify(res));
				if (res.status=='sukses') {
				    alert("Proses Verikiasai password baru sukses");//history.go(-1);
                    //location.reload()
                    //window.location = "<?php //echo site_url('auth/logout_front'); ?>";
                    window.location.replace("<?php echo site_url('home/login'); ?>");                    
				}else if (res.status=='code') {
				    alert("Kode Verikiasai tidak ada");//history.go(-1);
                    //location.reload()
                    //window.location = "<?php //echo site_url('auth/logout_front'); ?>";
                    //window.location.replace("<?php echo site_url('auth/logout_front'); ?>");                    
				}else {
				    alert("Terjadi kesalahan di server!");
				}

			//	table.ajax.reload();
			},
             error: (res) => {//alert("Terjadi kesalahan di server3!");
              if(JSON.stringify(res.status)==500){
                //return res.status(500).json({error: err});
                alert("Terjadi kesalahan di server1!");
              } else {
                //alert("Terima kasih telah mendaftarkan Lembaga Anda, Sedang dalam proses peninjauan");history.go(-1);
                //alert("Proses password sukses");
                window.location = "<?php echo site_url('home/reset_password'); ?>";
              }
            }
		});
	}); 
                
					function link_uploads() {
						if ($('#link_upload').val() == 'link') {
							$('#dokumen_link').show();
							$('#dokumen_upload').hide();
							$('#input_upload').val(null);
						} else if ($('#link_upload').val() == 'upload') {
							$('#dokumen_link').hide();
							$('#input_link').val(null);
							$('#dokumen_upload').show();
						}
					}
				</script>
			</div>
			<!-- end main content-->
			<!-- Footer End -->
		</div>
	</div>
	</div>
	<!--End pagewrapper-->


	<!-- Scroll Top Button -->
	<button class="scroll-top scroll-to-target" data-target="html"><span class="fa fa-angle-up"></span></button>


	<!--====== Jquery ======-->
	<script src="<?= base_url() ?>assets_landing/js/jquery-3.6.0.min.js"></script>
	<!--====== Bootstrap ======-->
	<script src="<?= base_url() ?>assets_landing/js/bootstrap.4.5.3.min.js"></script>

	<!--====== Appear js ======-->
	<script src="<?= base_url() ?>assets_landing/js/appear.js"></script>
	<!--====== WOW js ======-->
	<script src="<?= base_url() ?>assets_landing/js/wow.min.js"></script>
	<!--====== Isotope ======-->
	<script src="<?= base_url() ?>assets_landing/js/isotope.pkgd.min.js"></script>
	<!--====== Circle Progress ======-->
	<script src="<?= base_url() ?>assets_landing/js/circle-progress.min.js"></script>
	<!--====== Image loaded ======-->
	<script src="<?= base_url() ?>assets_landing/js/imagesloaded.pkgd.min.js"></script>
	<!--====== Nice Select ======-->
	<script src="<?= base_url() ?>assets_landing/js/jquery.nice-select.min.js"></script>
	<!--====== Magnific ======-->
	<script src="<?= base_url() ?>assets_landing/js/jquery.magnific-popup.min.js"></script>
	<!--====== Slick Slider ======-->
	<script src="<?= base_url() ?>assets_landing/js/slick.min.js"></script>
	<!--====== Main JS ======-->
	<script src="<?= base_url() ?>assets_landing/js/script.js"></script>
	<script src="<?= base_url() ?>assets_front/libs/metismenu/metisMenu.min.js"></script>
	</div>

	<script>
		const form = document.querySelector('form')
		const inputs = form.querySelectorAll('input')
		const KEYBOARDS = {
			backspace: 8,
			arrowLeft: 37,
			arrowRight: 39,
		}

		function handleInput(e) {
			const input = e.target
			const nextInput = input.nextElementSibling
			if (nextInput && input.value) {
				nextInput.focus()
				if (nextInput.value) {
					nextInput.select()
				}
			}
		}

		function handlePaste(e) {
			e.preventDefault()
			const paste = e.clipboardData.getData('text')
			inputs.forEach((input, i) => {
				input.value = paste[i] || ''
			})
		}

		function handleBackspace(e) {
			const input = e.target
			if (input.value) {
				input.value = ''
				return
			}

			input.previousElementSibling.focus()
		}

		function handleArrowLeft(e) {
			const previousInput = e.target.previousElementSibling
			if (!previousInput) return
			previousInput.focus()
		}

		function handleArrowRight(e) {
			const nextInput = e.target.nextElementSibling
			if (!nextInput) return
			nextInput.focus()
		}

		form.addEventListener('input', handleInput)
		inputs[0].addEventListener('paste', handlePaste)

		inputs.forEach(input => {
			input.addEventListener('focus', e => {
				setTimeout(() => {
					e.target.select()
				}, 0)
			})

			input.addEventListener('keydown', e => {
				switch (e.keyCode) {
					case KEYBOARDS.backspace:
						handleBackspace(e)
						break
					case KEYBOARDS.arrowLeft:
						handleArrowLeft(e)
						break
					case KEYBOARDS.arrowRight:
						handleArrowRight(e)
						break
					default:
				}
			})
		})
	</script>
</body>

</html>